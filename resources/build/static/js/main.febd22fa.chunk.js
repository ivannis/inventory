(this.webpackJsonpresources=this.webpackJsonpresources||[]).push([[0],{136:function(e,t,r){},154:function(e,t,r){},155:function(e,t,r){},156:function(e,t,r){},157:function(e,t,r){},176:function(e,t,r){},177:function(e,t,r){},340:function(e,t,r){},341:function(e,t,r){},342:function(e,t,r){"use strict";r.r(t);var n=r(1),c=r(0),i=r.n(c),a=r(23),s=r.n(a),u=r(12),o=r(35);r(154);function j(e){var t=e.title,r=void 0===t?"React app":t,i=e.children;return Object(c.useEffect)((function(){document.title=r}),[r]),Object(n.jsx)("div",{className:"container",children:Object(n.jsx)("main",{children:i})})}r(155);function d(e){var t=e.title,r=e.description;return Object(n.jsxs)("header",{children:[Object(n.jsx)("h1",{className:"title",children:t}),Object(n.jsx)("p",{className:"description",children:r})]})}r(156);function l(e){var t=e.children,r=e.type,c=void 0===r?"success":r;return Object(n.jsx)("div",{className:c,children:t})}var h=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(Boolean).join(" ")},b=function(e){var t=e.children,r=Object(o.c)(),c=r.isActive,i=r.onClick;return Object(n.jsx)("button",{className:h("tab",c&&"active"),onClick:i,children:t})};r(157);function x(e){var t=e.products,r=e.onClick,c=function(e,t){e.preventDefault(),r&&r(t)},i=t.map((function(e){return Object(n.jsx)("li",{children:Object(n.jsx)("a",{href:"!#",onClick:function(t){return c(t,e)},children:e.name})},e.id)}));return Object(n.jsx)("div",{className:"products",children:Object(n.jsx)("ul",{children:i})})}var O=r(11),f=r.n(O),p=r(19),m=r(20),v=r(8),y=r(137),g=r.n(y),N="http://0.0.0.0:9501/api/",w=function(){var e=Object(p.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.abrupt("return",g.a.create({baseURL:N,headers:Object(v.a)({Accept:"application/json","Content-Type":"application/json"},t),timeout:3e3}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(e){var t=e?e.response.data:{message:"Unknown error"};return Promise.reject(t)};function q(){return C.apply(this,arguments)}function C(){return(C=Object(p.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:return t=e.sent,e.abrupt("return",t.get("/products").then((function(e){return e.data})).catch(k));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Q=function(){return Object(m.e)("products",q)},S=r(22),F=function(e){return Object(n.jsxs)(S.a,Object(v.a)(Object(v.a)({speed:2,width:90,height:150,viewBox:"0 0 160 250",backgroundColor:"#f3f3f3",foregroundColor:"#ecebeb"},e),{},{children:[Object(n.jsx)("rect",{x:"0",y:"0",rx:"5",ry:"5",width:"160",height:"10"}),Object(n.jsx)("rect",{x:"0",y:"30",rx:"5",ry:"5",width:"160",height:"10"}),Object(n.jsx)("rect",{x:"0",y:"60",rx:"5",ry:"5",width:"160",height:"10"}),Object(n.jsx)("rect",{x:"0",y:"90",rx:"5",ry:"5",width:"160",height:"10"})]}))};function I(e){var t=e.onSelected,r=Q(),c=r.data;return r.isLoading?Object(n.jsx)(F,{className:"loader"}):Object(n.jsx)(x,{products:c,onClick:function(e){t&&t(e)}})}var D=r(148),B=r(138),L=r.n(B);function E(e,t){return P.apply(this,arguments)}function P(){return(P=Object(p.a)(f.a.mark((function e(t,r){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:return n=e.sent,e.abrupt("return",n.get("/stock/"+r+"/status").then((function(e){return e.data})).catch(k));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e,t){return A.apply(this,arguments)}function A(){return(A=Object(p.a)(f.a.mark((function e(t,r){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:return n=e.sent,e.abrupt("return",n.get("/stock/"+r+"/items").then((function(e){return e.data})).catch(k));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e){return _.apply(this,arguments)}function _(){return(_=Object(p.a)(f.a.mark((function e(t){var r,n,c,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.productId,n=t.date,c=Object(D.a)(t,["productId","date"]),n&&(c=Object(v.a)(Object(v.a)({},c),{},{date:L()(n).format("DD/M/Y")})),e.next=4,w();case 4:return i=e.sent,e.abrupt("return",i.post("/stock/"+r+"/purchase",c).then((function(e){return e.data})).catch(k));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e){return U.apply(this,arguments)}function U(){return(U=Object(p.a)(f.a.mark((function e(t){var r,n,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.productId,n=t.quantity,e.next=3,w();case 3:return c=e.sent,e.abrupt("return",c.post("/stock/"+r+"/apply",{quantity:n}).then((function(e){return e.data})).catch(k));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var V=function(e){return Object(m.e)(["stock",e],E)},Z=function(e){return Object(m.e)(["stock.items",e],T)},J=function(){var e=Object(m.f)();return Object(m.d)(M,{onSuccess:function(t,r){var n=r.productId;e.refetchQueries(["stock",n],{exact:!0}),e.refetchQueries(["stock.items",n],{exact:!0}),e.refetchQueries(["inventory.history",n],{exact:!0})}})},Y=function(){var e=Object(m.f)();return Object(m.d)(R,{onSuccess:function(t,r){var n=r.productId;e.refetchQueries(["stock",n],{exact:!0}),e.refetchQueries(["stock.items",n],{exact:!0}),e.refetchQueries(["inventory.history",n],{exact:!0})}})};r(176);function G(e){var t,r=e.stock;return Object(n.jsxs)("div",{className:"stock-card",children:[Object(n.jsxs)("div",{className:"stock",children:[Object(n.jsx)("strong",{className:(t=r.quantity,t>30?"high":t>0?"medium":"out"),children:r.quantity})," items"]}),Object(n.jsxs)("div",{className:"value",children:[Object(n.jsx)("strong",{children:r.valuation})," NZD"]})]})}var H=function(e){return Object(n.jsx)(S.a,Object(v.a)(Object(v.a)({width:755,height:80,viewBox:"0 0 755 80",backgroundColor:"#f0f0f0",foregroundColor:"#dedede"},e),{},{children:Object(n.jsx)("rect",{x:"0",y:"0",rx:"10",ry:"10",width:"755",height:"80"})}))};function W(e){var t=e.product,r=V(t.id),c=r.data;return r.isLoading?Object(n.jsx)(H,{className:"loader"}):Object(n.jsx)(G,{stock:c})}r(177);function z(e){var t=e.items,r=e.order,c=void 0===r?"desc":r;if(0===t.length)return Object(n.jsx)("div",{className:"history",children:Object(n.jsx)(l,{type:"error",children:"There is no history of movements."})});var i="desc"===c?t.slice().reverse():t,a=function(e){if(e.unitPrice)return Object(n.jsxs)("div",{className:"price",children:[e.unitPrice," NZD"]})},s=i.map((function(e){return Object(n.jsxs)("li",{children:[Object(n.jsxs)("div",{className:"item",children:[Object(n.jsx)("div",{className:"type",children:e.type}),Object(n.jsxs)("div",{className:"movement",children:[Object(n.jsxs)("div",{className:"unit",children:[Object(n.jsx)("strong",{children:e.quantity})," units"]}),a(e)]})]}),Object(n.jsx)("div",{className:"date",children:e.createdAt})]},e.id)}));return Object(n.jsx)("div",{className:"history",children:Object(n.jsx)("ul",{children:s})})}function K(e,t){return X.apply(this,arguments)}function X(){return(X=Object(p.a)(f.a.mark((function e(t,r){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:return n=e.sent,e.abrupt("return",n.get("/inventory/"+r+"/history").then((function(e){return e.data})).catch(k));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $=function(e){return Object(m.e)(["inventory.history",e],K)},ee=function(e){return Object(n.jsxs)(S.a,Object(v.a)(Object(v.a)({width:755,height:120,viewBox:"0 0 755 120",backgroundColor:"#f0f0f0",foregroundColor:"#dedede"},e),{},{children:[Object(n.jsx)("rect",{x:"0",y:"0",rx:"10",ry:"10",width:"755",height:"10"}),Object(n.jsx)("rect",{x:"0",y:"30",rx:"10",ry:"10",width:"755",height:"10"}),Object(n.jsx)("rect",{x:"0",y:"60",rx:"10",ry:"10",width:"755",height:"10"}),Object(n.jsx)("rect",{x:"0",y:"90",rx:"10",ry:"10",width:"755",height:"10"}),Object(n.jsx)("rect",{x:"0",y:"120",rx:"10",ry:"10",width:"755",height:"10"})]}))};function te(e){var t=e.product,r=$(t.id),c=r.data;return r.isLoading?Object(n.jsx)(ee,{className:"loader"}):Object(n.jsx)(z,{items:c})}var re=r(18),ne=r(49),ce=(r(106),r(182),r(141)),ie=r.n(ce),ae=function(e){var t=Object.assign({},e),r=Object(re.f)().setFieldValue,c=Object(re.e)(t),i=Object(u.a)(c,1)[0];return Object(n.jsx)(ie.a,Object(v.a)(Object(v.a)(Object(v.a)({},i),t),{},{dateFormat:"dd/MM/Y",selected:i.value&&new Date(i.value)||null,onChange:function(e){r(i.name,e)}}))},se=function(e){if(e.errors){var t="";return Object.entries(e.errors).forEach((function(e){var r=Object(u.a)(e,2),n=(r[0],r[1]);return t=t+n+"\n"})),t.substring(0,t.length-1)}return e.message},ue=r(42),oe=function(){return ue.b().shape({quantity:ue.a().typeError("Quantity must be a valid number").required().positive("Quantity must be a positive number").integer("Quantity must be an integer"),unit_price:ue.a().typeError("Quantity must be a valid number").required().positive("Quantity must be a positive number")})},je=function(e){return Object(n.jsx)(S.a,Object(v.a)(Object(v.a)({width:755,height:278,viewBox:"0 0 755 278",backgroundColor:"#f0f0f0",foregroundColor:"#dedede"},e),{},{children:Object(n.jsx)("rect",{x:"0",y:"0",rx:"10",ry:"10",width:"755",height:"278"})}))};r(136);function de(e){var t=e.product,r=J(t.id),a=Object(u.a)(r,2),s=a[0],o=a[1],j=o.isLoading,d=o.error;Object(c.useEffect)((function(){d&&ne.a.notify(Object(n.jsx)("div",{className:"toast-error",children:se(d)}),{position:"top-right"})}),[d]);var l=function(){var e=Object(p.a)(f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s(t);case 3:r=t.quantity,ne.a.notify(r+" products were added to the stock!",{position:"top-right"}),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return j?Object(n.jsx)(je,{className:"loader"}):Object(n.jsx)(i.a.Fragment,{children:Object(n.jsx)(re.d,{initialValues:{productId:t.id,quantity:null,unit_price:null,date:""},onSubmit:l,validationSchema:oe(),children:Object(n.jsxs)(re.c,{className:"form",children:[Object(n.jsxs)("div",{className:"form-item",children:[Object(n.jsx)("label",{htmlFor:"quantity",children:"Quantity:"}),Object(n.jsx)(re.b,{name:"quantity"}),Object(n.jsx)(re.a,{name:"quantity",render:function(e){return Object(n.jsx)("div",{className:"form-error",children:e})}})]}),Object(n.jsxs)("div",{className:"form-item",children:[Object(n.jsx)("label",{htmlFor:"quantity",children:"Unit price:"}),Object(n.jsx)(re.b,{name:"unit_price"}),Object(n.jsx)(re.a,{name:"unit_price",render:function(e){return Object(n.jsx)("div",{className:"form-error",children:e})}})]}),Object(n.jsxs)("div",{className:"form-item",children:[Object(n.jsx)("label",{htmlFor:"quantity",children:"Date:"}),Object(n.jsx)(ae,{name:"date"}),Object(n.jsx)(re.a,{name:"date",render:function(e){return Object(n.jsx)("div",{className:"form-error",children:e})}})]}),Object(n.jsx)("div",{className:"form-item",children:Object(n.jsx)("button",{className:"button",type:"submit",children:"Submit"})})]})})})}var le=function(){return ue.b().shape({quantity:ue.a().typeError("Quantity must be a valid number").required().positive("Quantity must be a positive number").integer("Quantity must be an integer")})},he=function(e){return Object(n.jsx)(S.a,Object(v.a)(Object(v.a)({width:755,height:184,viewBox:"0 0 755 184",backgroundColor:"#f0f0f0",foregroundColor:"#dedede"},e),{},{children:Object(n.jsx)("rect",{x:"0",y:"0",rx:"10",ry:"10",width:"755",height:"184"})}))};function be(e){var t=e.product,r=Y(t.id),a=Object(u.a)(r,2),s=a[0],o=a[1],j=o.isLoading,d=o.error;Object(c.useEffect)((function(){d&&ne.a.notify(Object(n.jsx)("div",{className:"toast-error",children:se(d)}),{position:"top-right"})}),[d]);var l=function(){var e=Object(p.a)(f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s(t);case 3:r=e.sent,ne.a.notify(Object(n.jsxs)("div",{children:["Hi there, the value of your purchase is ",Object(n.jsx)("strong",{children:r.total})," ",r.currency]}),{position:"top-right",duration:null}),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return j?Object(n.jsx)(he,{className:"loader"}):Object(n.jsx)(i.a.Fragment,{children:Object(n.jsx)(re.d,{initialValues:{productId:t.id,quantity:null},onSubmit:l,validationSchema:le(),children:Object(n.jsxs)(re.c,{className:"form",children:[Object(n.jsxs)("div",{className:"form-item",children:[Object(n.jsx)("label",{htmlFor:"quantity",children:"Quantity:"}),Object(n.jsx)(re.b,{name:"quantity"}),Object(n.jsx)(re.a,{name:"quantity",render:function(e){return Object(n.jsx)("div",{className:"form-error",children:e})}})]}),Object(n.jsx)("div",{className:"form-item",children:Object(n.jsx)("button",{className:"button",type:"submit",children:"Submit"})})]})})})}function xe(e){var t=e.items;if(0===t.length)return Object(n.jsx)("div",{className:"history",children:Object(n.jsx)(l,{type:"error",children:"There are no items in stock."})});var r=t.map((function(e){return Object(n.jsxs)("li",{children:[Object(n.jsx)("div",{className:"item",children:Object(n.jsxs)("div",{className:"movement",children:[Object(n.jsxs)("div",{className:"unit",children:[Object(n.jsx)("strong",{children:e.quantity})," units"]}),Object(n.jsxs)("div",{className:"price",children:[e.unitPrice," NZD"]})]})}),Object(n.jsx)("div",{className:"date",children:e.createdAt})]},e.id)}));return Object(n.jsx)("div",{className:"history",children:Object(n.jsx)("ul",{children:r})})}var Oe=function(e){return Object(n.jsxs)(S.a,Object(v.a)(Object(v.a)({width:755,height:120,viewBox:"0 0 755 120",backgroundColor:"#f0f0f0",foregroundColor:"#dedede"},e),{},{children:[Object(n.jsx)("rect",{x:"0",y:"0",rx:"10",ry:"10",width:"755",height:"10"}),Object(n.jsx)("rect",{x:"0",y:"30",rx:"10",ry:"10",width:"755",height:"10"}),Object(n.jsx)("rect",{x:"0",y:"60",rx:"10",ry:"10",width:"755",height:"10"}),Object(n.jsx)("rect",{x:"0",y:"90",rx:"10",ry:"10",width:"755",height:"10"}),Object(n.jsx)("rect",{x:"0",y:"120",rx:"10",ry:"10",width:"755",height:"10"})]}))};function fe(e){var t=e.product,r=Z(t.id),c=r.data;return r.isLoading?Object(n.jsx)(Oe,{className:"loader"}):Object(n.jsx)(xe,{items:c})}r(340);function pe(){var e=Object(c.useState)(1),t=Object(u.a)(e,2),r=t[0],a=t[1],s=Object(c.useState)(1),h=Object(u.a)(s,2),x=h[0],O=h[1],f=Object(c.useState)(null),p=Object(u.a)(f,2),m=p[0],v=p[1];return Object(n.jsxs)(j,{title:"Inventory app",children:[Object(n.jsx)(d,{title:"Welcome to inventory",description:"Get started by selecting a product on the list"}),Object(n.jsxs)("div",{className:"content",children:[Object(n.jsx)("div",{className:"left",children:Object(n.jsx)(I,{onSelected:function(e){v(e)}})}),Object(n.jsx)("div",{className:"right",children:m?Object(n.jsxs)(i.a.Fragment,{children:[Object(n.jsxs)(o.b,{state:[r,a],children:[Object(n.jsx)("div",{className:"tabs",children:Object(n.jsxs)("div",{className:"tab-list",children:[Object(n.jsx)(b,{children:"Apply"}),Object(n.jsx)(b,{children:"Purchase"})]})}),Object(n.jsx)(o.a,{children:Object(n.jsx)(be,{product:m})}),Object(n.jsx)(o.a,{children:Object(n.jsx)(de,{product:m})})]}),Object(n.jsx)(W,{product:m}),Object(n.jsxs)(o.b,{state:[x,O],children:[Object(n.jsx)("div",{className:"tabs",children:Object(n.jsxs)("div",{className:"tab-list small",children:[Object(n.jsx)(b,{children:"Inventory history"}),Object(n.jsx)(b,{children:"Inventory items"})]})}),Object(n.jsx)(o.a,{children:Object(n.jsx)(te,{product:m})}),Object(n.jsx)(o.a,{children:Object(n.jsx)(fe,{product:m})})]})]}):Object(n.jsx)(l,{type:"warning",children:"Please, select one product from the list."})})]})]})}var me=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,347)).then((function(t){var r=t.getCLS,n=t.getFID,c=t.getFCP,i=t.getLCP,a=t.getTTFB;r(e),n(e),c(e),i(e),a(e)}))},ve=r(147),ye=(r(341),new m.a),ge={queries:{staleTime:1e3,cacheTime:3e3}};s.a.render(Object(n.jsx)(i.a.StrictMode,{children:Object(n.jsxs)(m.b,{queryCache:ye,children:[Object(n.jsx)(m.c,{config:ge,children:Object(n.jsx)(pe,{})}),Object(n.jsx)(ve.ReactQueryDevtools,{initialIsOpen:!1})]})}),document.getElementById("root")),me()}},[[342,1,2]]]);
//# sourceMappingURL=main.febd22fa.chunk.js.map